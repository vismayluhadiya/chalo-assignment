"use strict";(self.webpackChunkchalo_assignment=self.webpackChunkchalo_assignment||[]).push([[42],{6790:function(n,e,t){var r=t(2791),i=t(8794),o=t.n(i),s=t(3284),c=t.n(s),a=(t(3856),t(184)),u={top:[0,0],bottom:[0,-50],left:[25,-35],right:[-25,-35]},l="lShoCSsBrDekAITrQwqPHTfXZI47gzFH";e.Z=function(n){var e=n.stops,t=(0,r.useRef)();return(0,r.useEffect)((function(){var n=o().map({key:l,container:t.current,center:[e[0].longitude,e[0].latitude],zoom:3,stylesVisibility:{trafficIncidents:!0,trafficFlow:!0}}),r=[];return e.forEach((function(n){return r.push(n.longitude+","+n.latitude)})),c().services.calculateRoute({key:l,locations:r.join(":")}).then((function(e){var t=e.toGeoJson();n.addLayer({id:"route",type:"line",source:{type:"geojson",data:t},paint:{"line-color":"#00d7ff","line-width":2}});var r=new(o().LngLatBounds);t.features[0].geometry.coordinates.forEach((function(n){return r.extend(o().LngLat.convert(n))})),n.fitBounds(r,{padding:20})})),e.forEach((function(e){var t=new(o().Marker)({draggable:!1}).setLngLat([e.longitude,e.latitude]).addTo(n),r=new(o().Popup)({offset:u}).setHTML(e.name);t.setPopup(r)})),function(){return n.remove()}}),[e]),(0,a.jsx)("div",{ref:t,className:"mapDiv"})}},9042:function(n,e,t){t.r(e),t.d(e,{default:function(){return K}});var r=t(9439),i=t(4666),o=t(4162),s=t(7205),c=t(5953),a=t(1508),u=t(8711),l=t(8928),d=t(6398),f=t(3811),x=t(5194),p=t(4565),h=t(6015),Z=t(5209),m=t(5629),g=t(2087),j=t(9520),v=t(1048),y=t(6875),k=t(8261),b=t(9419),w=t(1131),C=t(7097),S=t(6181),A=t.n(S),P=t(1413),R=t(417),F=t(3671),D=t(1267),I=t(1478),E=t(277),L=t(184),M=(0,E.ZP)((function(n){return(0,L.jsx)(R.Z,(0,P.Z)({disableGutters:!0,elevation:0},n))}))((function(n){var e=n.theme;return{border:"1px solid ".concat(e.palette.divider),"&:not(:last-child)":{},"&:before":{display:"none"}}}));M.Summary=(0,E.ZP)((function(n){return(0,L.jsx)(F.Z,(0,P.Z)({expandIcon:(0,L.jsx)(I.Z,{sx:{fontSize:"0.9rem"}})},n))}))((function(n){var e=n.theme;return{backgroundColor:"#F4F6FB",border:"none",borderRadius:e.spacing(.25),boxShadow:"0 0 0 1px #F4F6FB",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:e.spacing(1)}}})),M.Details=(0,E.ZP)(D.Z)((function(n){return{padding:n.theme.spacing(2)}}));var z=M,B=function(n){var e=n.details,t=n.onDeleteClick,r=n.onEditClick,i=n.onViewMapClick;return(0,L.jsxs)(l.Z,{sx:{maxWidth:"500px",my:2,backgroundColor:"#f7fafd",borderRadius:2},elevation:0,children:[(0,L.jsxs)(x.Z,{children:[(0,L.jsx)(p.Z,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:A()(e,"name")}),(0,L.jsxs)(h.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,L.jsxs)(p.Z,{variant:"h5",children:[A()(e,"stops[0].name"),"up"===A()(e,"direction")?(0,L.jsx)(k.Z,{sx:{verticalAlign:"sub",color:"ThreeDHighlight"}}):(0,L.jsx)(b.Z,{sx:{verticalAlign:"sub",color:"ThreeDHighlight"}})," ",A()(e,"stops[".concat(e.stops.length-1,"].name"))]}),(0,L.jsx)(Z.Z,{size:"small",label:A()(e,"is_active")?"Active":"Inactive",variant:"outlined",color:A()(e,"is_active")?"success":"error",sx:{mx:1}})]}),(0,L.jsxs)(z,{disableGutters:!0,elevation:0,sx:{background:"transparent",px:0,my:1},children:[(0,L.jsx)(z.Summary,{expandIcon:(0,L.jsx)(w.Z,{}),"aria-controls":"stop-details",id:"stop-header",children:"All Stops"}),(0,L.jsx)(z.Details,{children:(0,L.jsx)(m.Z,{dense:!0,children:e.stops.map((function(n,e){return(0,L.jsxs)(g.ZP,{children:[(0,L.jsx)(j.Z,{children:(0,L.jsx)(C.Z,{})}),(0,L.jsx)(v.Z,{primary:n.name,secondary:"(".concat(n.latitude," , ").concat(n.longitude,")")})]},"stop".concat(e))}))})})]})]}),(0,L.jsx)(y.Z,{sx:{paddingX:2},children:(0,L.jsxs)(c.ZP,{container:!0,children:[(0,L.jsxs)(c.ZP,{item:!0,xs:8,children:[(0,L.jsx)(s.Z,{onClick:function(){return r(e.id)},size:"small",color:"info",children:"Edit"}),(0,L.jsx)(s.Z,{onClick:function(){return t(e.id)},size:"small",color:"error",children:"Delete"})]}),(0,L.jsx)(c.ZP,{item:!0,xs:4,sx:{textAlign:"end"},children:"function"===typeof i&&(0,L.jsx)(s.Z,{onClick:function(){return i(e.id)},variant:"contained",size:"small",color:"secondary",children:"View on Map"})})]})})]},e.id)},T=t(6871),H=t(9434),_=t(8214),G=t(5861),V=t(5281),q=function(n){return function(){var e=(0,G.Z)((0,_.Z)().mark((function e(t){return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:V.sx,payload:{id:n}});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},N=t(6790),W=t(2791),X=t(9823),J=t(5472),Q=t(4261),Y=t(7967),K=function(){var n=(0,T.s0)(),e=(0,H.I0)(),t=(0,J.Z)(),p=(0,H.v9)((function(n){return n.routes.routes||null})),h=(0,W.useState)(null),Z=(0,r.Z)(h,2),m=Z[0],g=Z[1],j=function(n){e(q(n))},v=function(e){n("/route/".concat(e))},y=function(n){g(p.find((function(e){return e.id===n})))};return(0,L.jsxs)(L.Fragment,{children:[!!p&&p.length>0&&(0,L.jsx)(i.Z,{sx:{justifyContent:"end"},children:(0,L.jsxs)(o.Z,{direction:"row",spacing:2,children:[(0,L.jsx)(s.Z,{onClick:function(){n("/route/new")},variant:"contained",children:"Add Route"}),(0,L.jsx)(s.Z,{color:"secondary",onClick:function(){p.forEach((function(n){e(q(n.id))}))},variant:"contained",children:"Clear Routes"})]})}),(0,L.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,L.jsx)(c.ZP,{item:!0,xs:6,sx:{my:2},children:p&&p.length>0?p.map((function(n){return(0,L.jsx)(B,{details:n,onDeleteClick:j,onEditClick:v,onViewMapClick:m?void 0:y})})):(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(a.Z,{severity:"info",children:[(0,L.jsx)(u.Z,{children:"No Route Available!"}),"Add a route by clicking on\u2014 ",(0,L.jsx)("strong",{children:"Add route"})," button! ",(0,L.jsx)("br",{}),"You can also add a quick sample route by clicking on"," ",(0,L.jsx)("strong",{children:"Add Sample Route"})," button."]}),(0,L.jsxs)(o.Z,{direction:"row",spacing:1,sx:{my:2,mx:"auto"},children:[(0,L.jsx)(s.Z,{onClick:function(){n("/route/new")},variant:"contained",children:"Add Route"}),(0,L.jsx)(s.Z,{onClick:function(){return function(){var n={direction:"up",id:(0,Q.Z)(),is_active:!0,name:"Sample Route",stops:[{id:(0,Q.Z)(),latitude:"12.972442",longitude:"77.580643",name:"Bangalore"},{id:(0,Q.Z)(),latitude:"15.299326",longitude:"74.123993",name:"Goa"},{id:(0,Q.Z)(),latitude:"19.075983",longitude:"72.877655",name:"Mumbai"}]};e((0,Y.Z)(n)).then((function(){t.success("Sample Route added successfully")}))}()},variant:"outlined",color:"secondary",children:"Add Sample Route"})]})]})}),!!m&&p.length>0&&(0,L.jsx)(c.ZP,{item:!0,xs:6,sx:{my:3},children:(0,L.jsxs)(l.Z,{children:[(0,L.jsx)(d.Z,{title:m.name,action:(0,L.jsx)(f.Z,{onClick:function(){return g(null)},"aria-label":"close",children:(0,L.jsx)(X.Z,{})})}),(0,L.jsx)(x.Z,{sx:{height:"50vh"},children:(0,L.jsx)(N.Z,{stops:"up"!==m.direction?m.stops.reverse():m.stops})})]})})]})]})}},5472:function(n,e,t){t.d(e,{Z:function(){return d}});var r=t(6181),i=t.n(r),o=t(9434),s=t(8214),c=t(5861),a=t(4261),u=t(233),l=function(n,e){return function(){var t=(0,c.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:u.S,payload:{content:n,notificationType:e,id:(0,a.Z)()}});case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},d=function(){var n=(0,o.I0)();return{error:function(e){return n(l(e,"error"))},success:function(e){return n(l(e,"success"))},info:function(e){return n(l(e,"info"))},warning:function(e){return n(l(e,"warning"))},apiError:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"response.data.message";return function(o){n(l(i()(o,r,e),"error")),"function"===typeof t&&t(o)}}}}},7967:function(n,e,t){var r=t(8214),i=t(5861),o=t(5281);e.Z=function(n){return function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:o.hF,payload:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=42.2bbaada8.chunk.js.map