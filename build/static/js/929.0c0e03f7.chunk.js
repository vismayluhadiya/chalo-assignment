"use strict";(self.webpackChunkchalo_assignment=self.webpackChunkchalo_assignment||[]).push([[929],{6790:function(n,e,t){var i=t(2791),r=t(8794),o=t.n(r),s=t(3284),u=t.n(s),a=(t(3856),t(184)),c={top:[0,0],bottom:[0,-50],left:[25,-35],right:[-25,-35]},l="lShoCSsBrDekAITrQwqPHTfXZI47gzFH";e.Z=function(n){var e=n.stops,t=(0,i.useRef)();return(0,i.useEffect)((function(){var n=o().map({key:l,container:t.current,center:[e[0].longitude,e[0].latitude],zoom:3,stylesVisibility:{trafficIncidents:!0,trafficFlow:!0}}),i=[];return e.forEach((function(n){return i.push(n.longitude+","+n.latitude)})),u().services.calculateRoute({key:l,locations:i.join(":")}).then((function(e){var t=e.toGeoJson();n.addLayer({id:"route",type:"line",source:{type:"geojson",data:t},paint:{"line-color":"#00d7ff","line-width":2}});var i=new(o().LngLatBounds);t.features[0].geometry.coordinates.forEach((function(n){return i.extend(o().LngLat.convert(n))})),n.fitBounds(i,{padding:20})})),e.forEach((function(e){var t=new(o().Marker)({draggable:!1}).setLngLat([e.longitude,e.latitude]).addTo(n),i=new(o().Popup)({offset:c}).setHTML(e.name);t.setPopup(i)})),function(){return n.remove()}}),[e]),(0,a.jsx)("div",{ref:t,className:"mapDiv"})}},4929:function(n,e,t){t.r(e),t.d(e,{default:function(){return I}});var i=t(3433),r=t(4942),o=t(1413),s=t(9439),u=t(4666),a=t(7205),c=t(5953),l=t(8928),d=t(6398),f=t(5194),p=t(8381),Z=t(1898),h=t(120),v=t(3492),x=t(2900),m=t(7856),g=t(8854),j=t(6875),y=t(2791),w=t(6871),b=t(5472),k=t(4261),C=t(9434),L=t(7967),z=t(8214),P=t(5861),R=t(5281),_=function(n,e){return function(){var t=(0,P.Z)((0,z.Z)().mark((function t(i){return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i({type:R.lF,payload:{id:n,data:e}});case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},q=t(6790),S=t(184),E={name:"",id:(0,k.Z)(),direction:"up",is_active:!0,stops:[{id:(0,k.Z)(),name:"",latitude:"",longitude:""},{id:(0,k.Z)(),name:"",latitude:"",longitude:""}]},I=function(){var n=(0,w.s0)(),e=(0,b.Z)(),t=(0,C.I0)(),k=(0,w.UO)().routeId,z=(0,y.useState)(E),P=(0,s.Z)(z,2),R=P[0],I=P[1],F=(0,C.v9)((function(n){return n.routes.routes}));(0,y.useEffect)((function(){k&&F&&F.length>0&&I(F.find((function(n){return n.id===k})))}),[k]);var W=function(n){return function(e){R[n]!==e&&I((0,o.Z)((0,o.Z)({},R),{},(0,r.Z)({},n,e)))}},D=function(n){return function(e){return function(t){I((0,o.Z)((0,o.Z)({},R),{},{stops:R.stops.map((function(i,s){return s!==n?i:(0,o.Z)((0,o.Z)({},i),{},(0,r.Z)({},e,t))}))}))}}};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(u.Z,{sx:{justifyContent:"end"},children:(0,S.jsx)(a.Z,{onClick:function(){n("/route-list")},variant:"contained",children:"Back to Routes"})}),(0,S.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,S.jsx)(c.ZP,{item:!0,xs:6,sx:{my:2},children:(0,S.jsxs)(l.Z,{sx:{my:2,backgroundColor:"#f7fafd",borderRadius:2},elevation:0,children:[(0,S.jsx)(d.Z,{title:"Add/Edit Route"}),(0,S.jsxs)(f.Z,{children:[(0,S.jsx)(p.Z,{size:"small",autoFocus:!0,value:R.name,fullWidth:!0,required:!0,label:"Route Name",sx:{my:1},onChange:function(n){return W("name")(n.target.value)}}),(0,S.jsxs)(Z.Z,{sx:{py:1,width:"100%"},children:[(0,S.jsx)(h.Z,{children:"Direction?"}),(0,S.jsxs)(v.Z,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:R.direction,onChange:function(n){return W("direction")(n.target.value)},children:[(0,S.jsx)(x.Z,{value:"up",control:(0,S.jsx)(m.Z,{}),label:"Up"}),(0,S.jsx)(x.Z,{value:"down",control:(0,S.jsx)(m.Z,{}),label:"Down"})]})]}),(0,S.jsx)(g.Z,{size:"small",sx:{py:1},color:R.is_active?"success":"warning",value:R.is_active,selected:R.is_active,onChange:function(){W("is_active")(!R.is_active)},children:R.is_active?"Active":"Inactive"}),R.stops.map((function(n,e){return(0,S.jsxs)(l.Z,{sx:{my:2,p:2,borderRadius:2},elevation:0,children:[(0,S.jsx)(d.Z,{title:"Stop ".concat(e+1),action:0!==e&&1!==e?(0,S.jsx)(a.Z,{variant:"outlined",color:"error",onClick:function(){return function(n){R.stops.length<3||I((0,o.Z)((0,o.Z)({},R),{},{stops:R.stops.filter((function(e,t){return t!==n}))}))}(e)},size:"small",children:"Delete"}):null}),(0,S.jsx)(p.Z,{size:"small",fullWidth:!0,required:!0,id:"outlined-required",label:"Stop Name",margin:"dense",value:n.name,onChange:function(n){D(e)("name")(n.target.value)}}),(0,S.jsxs)(c.ZP,{container:!0,spacing:2,children:[(0,S.jsxs)(c.ZP,{item:!0,xs:6,children:[" ",(0,S.jsx)(p.Z,{size:"small",fullWidth:!0,required:!0,id:"outlined-required",label:"Latitude",margin:"dense",value:n.latitude,onChange:function(n){D(e)("latitude")(n.target.value)}})]}),(0,S.jsx)(c.ZP,{item:!0,xs:6,children:(0,S.jsx)(p.Z,{size:"small",fullWidth:!0,required:!0,id:"outlined-required",label:"Longitude",margin:"dense",value:n.longitude,onChange:function(n){D(e)("longitude")(n.target.value)}})})]})]},"stops-".concat(e))})),(0,S.jsx)(a.Z,{variant:"outlined",onClick:function(){I((0,o.Z)((0,o.Z)({},R),{},{stops:[].concat((0,i.Z)(R.stops),[E.stops])}))},fullWidth:!0,sx:{my:2},size:"small",children:"Add Stop"})]}),(0,S.jsx)(j.Z,{children:(0,S.jsx)(a.Z,{fullWidth:!0,variant:"contained",onClick:function(){k?t(_(k,R)).then((function(){e.success("Route edited successfully"),n("/route-list")})):t((0,L.Z)(R)).then((function(){e.success("New Route added successfully"),n("/route-list")}))},children:"Submit"})})]})}),!!k&&!!R&&!!R.stops&&(0,S.jsx)(c.ZP,{item:!0,xs:6,sx:{my:3},children:(0,S.jsxs)(l.Z,{children:[(0,S.jsx)(d.Z,{title:R.name}),(0,S.jsx)(f.Z,{sx:{height:"50vh"},children:(0,S.jsx)(q.Z,{stops:"up"!==R.direction?R.stops.reverse():R.stops})})]})})]})]})}},5472:function(n,e,t){t.d(e,{Z:function(){return d}});var i=t(6181),r=t.n(i),o=t(9434),s=t(8214),u=t(5861),a=t(4261),c=t(233),l=function(n,e){return function(){var t=(0,u.Z)((0,s.Z)().mark((function t(i){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i({type:c.S,payload:{content:n,notificationType:e,id:(0,a.Z)()}});case 1:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},d=function(){var n=(0,o.I0)();return{error:function(e){return n(l(e,"error"))},success:function(e){return n(l(e,"success"))},info:function(e){return n(l(e,"info"))},warning:function(e){return n(l(e,"warning"))},apiError:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"response.data.message";return function(o){n(l(r()(o,i,e),"error")),"function"===typeof t&&t(o)}}}}},7967:function(n,e,t){var i=t(8214),r=t(5861),o=t(5281);e.Z=function(n){return function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:o.hF,payload:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=929.0c0e03f7.chunk.js.map